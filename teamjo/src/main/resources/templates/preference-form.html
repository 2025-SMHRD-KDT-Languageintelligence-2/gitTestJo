<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="/css/preference-form.css">
  <title>λ§μ¶¤ν• μ‹λ‹¨ μ„¤λ¬Έ</title>
</head>
<body>
  <h1>λ§μ¶¤ν• μ‹λ‹¨ μ¶”μ²μ„ μ„ν• μ„¤λ¬Έ</h1>
  <form action="/submit-survey" method="post">

    <!-- 0. μ„ νΈν•λ” λ°¥ μΆ…λ¥ -->
    <div class="section">
      <label>0. μ„ νΈν•λ” λ°¥ μΆ…λ¥λ¥Ό μ„ νƒν•΄μ£Όμ„Έμ” (λ³µμ μ„ νƒ κ°€λ¥)</label>
      <input type="checkbox" name="preferredRiceTypes" value="κ²€μ •μ½©λ°¥"> κ²€μ •μ½©λ°¥
      <input type="checkbox" name="preferredRiceTypes" value="κ·€λ¦¬λ°¥"> κ·€λ¦¬λ°¥
      <input type="checkbox" name="preferredRiceTypes" value="λ³΄λ¦¬λ°¥"> λ³΄λ¦¬λ°¥
      <input type="checkbox" name="preferredRiceTypes" value="μμλ°¥"> μμλ°¥
      <input type="checkbox" name="preferredRiceTypes" value="ν„λ―Έλ°¥"> ν„λ―Έλ°¥
      <input type="checkbox" name="preferredRiceTypes" value="μ€λ°¥"> μ€λ°¥
      <input type="checkbox" name="preferredRiceTypes" value="μ¤κ³΅λ°¥"> μ¤κ³΅λ°¥
      <input type="checkbox" name="preferredRiceTypes" value="μ΅κ³΅λ°¥"> μ΅κ³΅λ°¥
      <input type="checkbox" name="preferredRiceTypes" value="μ°¨μ΅°λ°¥"> μ°¨μ΅°λ°¥
      <input type="checkbox" name="preferredRiceTypes" value="μ°°λ°¥"> μ°°λ°¥
      <input type="checkbox" name="preferredRiceTypes" value="ν‘λ―Έλ°¥"> ν‘λ―Έλ°¥
    </div>

    <!-- 1. μ„ νΈ μ΅°λ¦¬ λ°©μ‹ -->
    <div class="section">
      <label>1. μ„ νΈν•λ” μ΅°λ¦¬ λ°©μ‹ (λ³µμ μ„ νƒ κ°€λ¥)</label>
      <input type="checkbox" name="cookingStyles" value="κµ­λ¬Όμ”λ¦¬"> κµ­λ¬Ό μ”λ¦¬
      <input type="checkbox" name="cookingStyles" value="λ³¶μμ”λ¦¬"> λ³¶μ μ”λ¦¬
      <input type="checkbox" name="cookingStyles" value="μ΅°λ¦Όμ”λ¦¬"> μ΅°λ¦Ό μ”λ¦¬
      <input type="checkbox" name="cookingStyles" value="μ°"> μ°
      <input type="checkbox" name="cookingStyles" value="κµ¬μ΄"> κµ¬μ΄
    </div>

    <!-- 2. ν”Όν•κ³  μ‹¶μ€ μμ‹ νΉμ„± -->
    <div class="section">
      <label>2. ν”Όν•κ³  μ‹¶μ€ μμ‹ νΉμ„±</label>
      <input type="checkbox" name="dislikedFeatures" value="λ§¤μ΄λ§›"> λ§¤μ΄ μμ‹
      <input type="checkbox" name="dislikedFeatures" value="λ°ν¨κµ­"> λ°ν¨λ μμ‹
      <input type="checkbox" name="dislikedFeatures" value="κ³ μ§€λ°©"> κΈ°λ¦„μ§„ μμ‹
    </div>

    <!-- 3. κΈ°ν”Ό μ¬λ£ -->
    <div class="section">
      <label for="dislikedIngredients">3. κΈ°ν”Όν•λ” μ¬λ£ (μ‰Όν‘λ΅ κµ¬λ¶„)</label>
      <input type="text" name="dislikedIngredients" id="dislikedIngredients" placeholder="μ: λΌμ§€κ³ κΈ°, μ¤μ§•μ–΄, κΉ€μΉ">
    </div>

    <!-- 4. λ‹Ήλ¥ λ―Όκ°λ„ -->
    <div class="section">
      <label>4. λ‹Ήλ¥μ— λ€ν• λ―Όκ°λ„</label>
      <input type="radio" name="sugarSensitivity" value="λ¬΄κ΄€μ‹¬" checked> μ‹ κ²½ μ“°μ§€ μ•μ
      <input type="radio" name="sugarSensitivity" value="μ¤‘κ°„"> μ•½κ°„ μ‹ κ²½ μ”€
      <input type="radio" name="sugarSensitivity" value="κ³ "> κΌ­ μ €λ‹Ήμ‹ μ›ν•¨
    </div>

    <!-- 5. μ„ νΈ μ¬λ£ -->
    <div class="section">
      <label>5. μ„ νΈν•λ” μ¬λ£ (λ³µμ μ„ νƒ κ°€λ¥)</label>
      <input type="checkbox" name="preferredIngredients" value="λ‹­κ³ κΈ°"> λ‹­κ³ κΈ°
      <input type="checkbox" name="preferredIngredients" value="λ‘λ¶€"> λ‘λ¶€
      <input type="checkbox" name="preferredIngredients" value="κ³„λ€"> κ³„λ€
      <input type="checkbox" name="preferredIngredients" value="λ²„μ„―"> λ²„μ„―
      <input type="checkbox" name="preferredIngredients" value="κ³¤μ•½"> κ³¤μ•½
    </div>

    <!-- 6. λ§¤μ΄λ§› μ„ νΈ μ—¬λ¶€ -->
    <div class="section">
      <label>6. λ§¤μ΄λ§›μ„ μ„ νΈν•μ‹λ‚μ”?</label>
      <input type="radio" name="spicyPreference" value="yes"> μ„ νΈν•¨
      <input type="radio" name="spicyPreference" value="no" checked> μ„ νΈν•μ§€ μ•μ
    </div>

    <!-- 7. μΉΌλ΅λ¦¬ λ¶„λ°° (λ™μ  μƒμ„±) -->
    <div class="section" id="cal-ratio-section">
      <label>7. ν•λ£¨ κ¶μ¥ μ„­μ·¨ μΉΌλ΅λ¦¬ λ¶„λ°° (μ΄ν•© 100%)</label>
      <!-- μ•„μΉ¨/μ μ‹¬/μ €λ… input ν•„λ“λ” JSμ—μ„ μƒμ„± -->
    </div>

    <button type="submit">μ μ¶ν•κ³  μ‹λ‹¨ μ¶”μ² λ°›κΈ°</button>
  </form>

  <!-- π”½ λ™μ  μΉΌλ΅λ¦¬ λ¶„λ°° μƒμ„± μ¤ν¬λ¦½νΈ -->
  <script th:inline="javascript">
    let mealTimesRaw = /*[[${mealTimes}]]*/ 'μ•„μΉ¨,μ μ‹¬,μ €λ…';
    if (!mealTimesRaw || mealTimesRaw === 'null') {
      mealTimesRaw = 'μ•„μΉ¨,μ μ‹¬,μ €λ…';
    }

    const mealTimes = mealTimesRaw.split(',');
    const mealKorToEng = {
      "μ•„μΉ¨": "Morning",
      "μ μ‹¬": "Lunch",
      "μ €λ…": "Dinner"
    };

    window.onload = function () {
      const calRatioContainer = document.getElementById("cal-ratio-section");

      mealTimes.forEach(meal => {
        const eng = mealKorToEng[meal.trim()];
        const wrapper = document.createElement("div");
        wrapper.innerHTML = `
          ${meal}: <input type="number" name="calRatio${eng}" value="33" min="0" max="100"> %
        `;
        calRatioContainer.appendChild(wrapper);
      });
    };
  </script>
</body>
</html>